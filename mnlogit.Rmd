---
title: "Limited Dependent Variables"
subtitle: "Multinomial Logit"
author: "Jose Fernandez"
institute: "University of Louisville"
date: "updated: `r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

## Multinomial Logit an Example

These slides will show you how to perform multinomial logit using the `nnet` library.

Open up Rstudio and enter in the following code.
```{r warning=FALSE, message=FALSE}
# Loading the required packages
rm(list=ls()); # clears your environment
options(scipen=999) # To avoid scientific notation
library(openintro)
library(broom)
library(nnet) # This package contains multinomial logit function
library(stargazer) # Makes tables look nice
# Getting the sample data from UCLA
data(hsb2)
```
---
## Let's take a look at the data

```{r}
tibble::glimpse(hsb2)
```

---
## Let's check our dependent variable

We are looking at different levels of socio-economic status.

```{r}
# Checking the output (dependent) variable
table(hsb2$ses)

# By default the first category is the reference.
# To change it so ‘middle’ is the reference type
hsb2$ses2 = relevel(hsb2$ses, ref = "middle")
```
---
## R Code
Running the multinomial logit model using the multinom() function
```{r echo=TRUE, eval=FALSE}
multi1 = multinom(ses2 ~ science + socst + gender, data=hsb2)
stargazer(multi1, type = "html")
```
---
## In Stargazer
```{r echo = FALSE, warning=FALSE,message=FALSE, results='asis'}
multi1 = multinom(ses2 ~ science + socst + gender, data=hsb2)
stargazer(multi1, type = "html")
```

---
## Interpretation

These are the logit coefficients relative to the reference category. For example, under ‘science’, the -0.02 suggests that for one unit increase in ‘science’ score, the logit coefficient for ‘low’ relative to ‘middle’ will go down by that amount, -0.02. 

In other words, if your science score increases one unit, your chances of staying in the middle ses category are higher compared to staying in low ses

---
## Relative odds ratio
```{r results='asis'}
multi1.rrr = exp(coef(multi1))
stargazer(multi1, type="html", coef=list(multi1.rrr), p.auto=FALSE)
```

---
## Interpretation

Keeping all other variables constant, if your science score increases one unit, you are 0.97 times more likely to stay in the low ses category as compared to the middle ses category (the risk or odds is 3% lower). The coefficient, however, is not significant.

Keeping all other variables constant, if your science score increases one unit, you are 1.02 times more likely to stay in the high ses category as compared to the middle ses category (the risk or odds is 2% higher). The coefficient, however, is not significant.